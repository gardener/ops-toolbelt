{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: [
    "config:recommended",
    ":semanticCommitsDisabled",
    "regexManagers:githubActionsVersions",
    "group:monorepos"
  ],
  labels: ["kind/enhancement"],
  customManagers: [
    {
      // Update `_VERSION` and `_version` variables in Makefiles and scripts.
      // Inspired by `regexManagers:dockerfileVersions` preset.
      customType: "regex",
      fileMatch: [
        "Makefile$",
        "\\.yaml$",
        "\\.sh$",
        "^hacks/*",
        "^.ci/build$"
      ],
      matchStrings: [
        "# renovate: datasource=(?<datasource>[a-z-.]+?) depName=(?<depName>[^\\s]+?)(?: (lookupName|packageName)=(?<packageName>[^\\s]+?))?(?: versioning=(?<versioning>[^\\s]+?))?(?: extractVersion=(?<extractVersion>[^\\s]+?))?(?: registryUrl=(?<registryUrl>[^\\s]+?))?\\s.+?_(VERSION|version) *[?:]?= *\"?(?<currentValue>.+?)\"?\\s"
      ]
    },
    {
      // Update `version` variables in common-components.yaml.
      // Inspired by `regexManagers:dockerfileVersions` preset.
      customType: "regex",
      fileMatch: ["common-components\\.yaml$"],
      matchStrings: [
        "# renovate: datasource=(?<datasource>[a-z-.]+?) depName=(?<depName>[^\\s]+?)(?: (?:lookupName|packageName)=(?<packageName>[^\\s]+?))?(?: versioning=(?<versioning>[^\\s]+?))?(?: extractVersion=(?<extractVersion>[^\\s]+?))?(?: registryUrl=(?<registryUrl>[^\\s]+?))?\\s+version\\s*:\\s*[\"']?(?<currentValue>.+?)[\"']?\\s"
      ]
    },
  ],
  packageRules: [
    {
      // Group github-actions in one PR.
      groupName: "github-actions",
      matchManagers: ["github-actions"]
    },
    {
      // Only create PRs for patch updates of kubectl.
      "matchPackageNames": ["kubernetes/kubernetes"],
      // This is a compromise due to the version skew policy of Kubernetes.
      "allowedVersions": "~1.28"
    }
  ]
}
